Keep localMax and localMin and globalMax;
localMin/localMax should always compared to current value since it can be zero.
